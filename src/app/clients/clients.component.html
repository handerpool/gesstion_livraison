<div class="dashboard-container">  <!-- Keep the same class for consistent layout -->
    <app-sidebar></app-sidebar>
  
    <div class="main-content">
<div class="clients-container">
    <div class="clients-header">
      <h1>Clients</h1>
      <button class="add-client-btn" (click)="addNewClient()">
        <i class="fas fa-plus"></i> Ajouter un client
      </button>
    </div>
  
    <div class="search-filter-container">
      <div class="search-box">
        <input 
          type="text" 
          [(ngModel)]="searchTerm" 
          (input)="searchClients()" 
          placeholder="Rechercher un client..."
        >
        <i class="fas fa-search"></i>
      </div>
      
      <div class="filter-options">
        <select [(ngModel)]="statusFilter" (change)="applyFilters()">
          <option value="all">Tous les statuts</option>
          <option value="active">Actifs</option>
          <option value="inactive">Inactifs</option>
        </select>
      </div>
    </div>
  
    <div class="clients-table-container">
      <table class="clients-table">
        <thead>
          <tr>
            <th (click)="toggleSort('name')">
              Nom
              <i class="fas" [ngClass]="{'fa-sort-up': sortBy === 'name' && sortDirection === 'asc', 'fa-sort-down': sortBy === 'name' && sortDirection === 'desc', 'fa-sort': sortBy !== 'name'}"></i>
            </th>
            <th>Contact</th>
            <th (click)="toggleSort('city')">
              Ville
              <i class="fas" [ngClass]="{'fa-sort-up': sortBy === 'city' && sortDirection === 'asc', 'fa-sort-down': sortBy === 'city' && sortDirection === 'desc', 'fa-sort': sortBy !== 'city'}"></i>
            </th>
            <th (click)="toggleSort('joinDate')">
              Date d'inscription
              <i class="fas" [ngClass]="{'fa-sort-up': sortBy === 'joinDate' && sortDirection === 'asc', 'fa-sort-down': sortBy === 'joinDate' && sortDirection === 'desc', 'fa-sort': sortBy !== 'joinDate'}"></i>
            </th>
            <th (click)="toggleSort('totalOrders')">
              Commandes
              <i class="fas" [ngClass]="{'fa-sort-up': sortBy === 'totalOrders' && sortDirection === 'asc', 'fa-sort-down': sortBy === 'totalOrders' && sortDirection === 'desc', 'fa-sort': sortBy !== 'totalOrders'}"></i>
            </th>
            <th>Statut</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let client of filteredClients" [ngClass]="{'inactive-row': client.status === 'inactive'}">
            <td>{{ client.name }}</td>
            <td>
              <div>{{ client.email }}</div>
              <div>{{ client.phone }}</div>
            </td>
            <td>{{ client.city }}</td>
            <td>{{ client.joinDate | date:'dd/MM/yyyy' }}</td>
            <td>{{ client.totalOrders }}</td>
            <td>
              <span class="status-badge" [ngClass]="{'active': client.status === 'active', 'inactive': client.status === 'inactive'}">
                {{ client.status === 'active' ? 'Actif' : 'Inactif' }}
              </span>
            </td>
            <td class="actions-cell">
              <button class="action-btn view-btn" (click)="viewClientDetails(client)" title="Voir les détails">
                <i class="fas fa-eye"></i>
              </button>
              <button class="action-btn edit-btn" (click)="editClient(client)" title="Modifier">
                <i class="fas fa-edit"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  
    <!-- Client Details Modal -->
    <div class="modal-overlay" *ngIf="showClientDetails" (click)="closeClientDetails()">
      <div class="client-details-modal" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h2>Détails du client</h2>
          <button class="close-btn" (click)="closeClientDetails()">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-content" *ngIf="selectedClient">
          <div class="client-info-section">
            <h3>Informations générales</h3>
            <div class="info-grid">
              <div class="info-item">
                <span class="label">Nom:</span>
                <span class="value">{{ selectedClient.name }}</span>
              </div>
              <div class="info-item">
                <span class="label">Email:</span>
                <span class="value">{{ selectedClient.email }}</span>
              </div>
              <div class="info-item">
                <span class="label">Téléphone:</span>
                <span class="value">{{ selectedClient.phone }}</span>
              </div>
              <div class="info-item">
                <span class="label">Statut:</span>
                <span class="value status-badge" [ngClass]="{'active': selectedClient.status === 'active', 'inactive': selectedClient.status === 'inactive'}">
                  {{ selectedClient.status === 'active' ? 'Actif' : 'Inactif' }}
                </span>
              </div>
            </div>
          </div>
          
          <div class="client-info-section">
            <h3>Adresse</h3>
            <div class="info-grid">
              <div class="info-item">
                <span class="label">Adresse:</span>
                <span class="value">{{ selectedClient.address }}</span>
              </div>
              <div class="info-item">
                <span class="label">Ville:</span>
                <span class="value">{{ selectedClient.city }}</span>
              </div>
              <div class="info-item">
                <span class="label">Code postal:</span>
                <span class="value">{{ selectedClient.postalCode }}</span>
              </div>
              <div class="info-item">
                <span class="label">Pays:</span>
                <span class="value">{{ selectedClient.country }}</span>
              </div>
            </div>
          </div>
          
          <div class="client-info-section">
            <h3>Statistiques</h3>
            <div class="info-grid">
              <div class="info-item">
                <span class="label">Date d'inscription:</span>
                <span class="value">{{ selectedClient.joinDate | date:'dd/MM/yyyy' }}</span>
              </div>
              <div class="info-item">
                <span class="label">Total des commandes:</span>
                <span class="value">{{ selectedClient.totalOrders }}</span>
              </div>
            </div>
          </div>
          
          <div class="client-info-section" *ngIf="selectedClient.notes">
            <h3>Notes</h3>
            <p class="notes">{{ selectedClient.notes }}</p>
          </div>
          
          <div class="modal-actions">
            <button class="edit-client-btn" (click)="editClient(selectedClient)">
              <i class="fas fa-edit"></i> Modifier
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
